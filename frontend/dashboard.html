<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lead Dashboard</title>
<style>
  body { font-family:Arial,sans-serif; background:#f5f5f5; padding:20px; }
  h2 { text-align:center; margin-bottom:20px; }
  table { width:100%; border-collapse:collapse; background:#fff; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
  th, td { padding:12px; border:1px solid #ddd; text-align:left; }
  th { background:#3A8DFF; color:#fff; }
  tr:nth-child(even){background:#f2f2f2;}
</style>
</head>
<body>

<h2>Lead Dashboard</h2>
<table id="leadsTable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Language</th>
      <th>Original Message</th>
      <th>Translated Message</th>
      <th>Status</th>
      <th>Created At</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function loadLeads() {
  const tbody = document.querySelector("#leadsTable tbody");
  tbody.innerHTML = "";
  try {
    const res = await fetch("http://127.0.0.1:5000/api/leads");
    const leads = await res.json();
    leads.forEach(l => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${l.id}</td>
        <td>${l.name}</td>
        <td>${l.email}</td>
        <td>${l.language}</td>
        <td>${l.message}</td>
        <td>${l.translated_message}</td>
        <td>${l.status}</td>
        <td>${new Date(l.created_at).toLocaleString()}</td>
      `;
      tbody.appendChild(row);
    });
  } catch(e){ console.log(e); }
}
window.onload = loadLeads;
</script>

</body>
</html>
